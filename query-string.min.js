var QueryString={};function charCode(b){return b.charCodeAt(0)}
QueryString.unescapeBuffer=function(b,f){for(var d=new Buffer(b.length),e="CHAR",c,a,i,h=0,g=0;h<=b.length;h++){a=b.charCodeAt(h);switch(e){case "CHAR":switch(a){case charCode("%"):c=0;e="HEX0";break;case charCode("+"):if(f)a=charCode(" ");default:d[g++]=a}break;case "HEX0":e="HEX1";i=a;if(charCode("0")<=a&&a<=charCode("9"))c=a-charCode("0");else if(charCode("a")<=a&&a<=charCode("f"))c=a-charCode("a")+10;else if(charCode("A")<=a&&a<=charCode("F"))c=a-charCode("A")+10;else{d[g++]=charCode("%");d[g++]=
a;e="CHAR";break}break;case "HEX1":e="CHAR";if(charCode("0")<=a&&a<=charCode("9"))a=a-charCode("0");else if(charCode("a")<=a&&a<=charCode("f"))a=a-charCode("a")+10;else if(charCode("A")<=a&&a<=charCode("F"))a=a-charCode("A")+10;else{d[g++]=charCode("%");d[g++]=i;d[g++]=a;break}d[g++]=16*c+a}}return d.slice(0,g-1)};QueryString.unescape=function(b,f){return QueryString.unescapeBuffer(b,f).toString()};QueryString.escape=function(b){return encodeURIComponent(b)};
var stringifyPrimitive=function(b){switch(typeof b){case "string":return b;case "boolean":return b?"true":"false";case "number":return isFinite(b)?b:"";default:return""}};
QueryString.stringify=QueryString.encode=function(b,f,d,e){f=f||"&";d=d||"=";b=b===null?undefined:b;switch(typeof b){case "object":return theosp.array.map(theosp.object.keys(b),function(c){return theosp.array.isArray(b[c])?b[c].map(function(a){return QueryString.escape(stringifyPrimitive(c))+d+QueryString.escape(stringifyPrimitive(a))}).join(f):QueryString.escape(stringifyPrimitive(c))+d+QueryString.escape(stringifyPrimitive(b[c]))}).join(f);default:return e?QueryString.escape(stringifyPrimitive(e))+
d+QueryString.escape(stringifyPrimitive(b)):""}};QueryString.parse=QueryString.decode=function(b,f,d){f=f||"&";d=d||"=";var e={};if(typeof b!=="string")return e;b.split(f).forEach(function(c){var a=c.split(d);c=QueryString.unescape(a[0],true);a=QueryString.unescape(a.slice(1).join(d),true);if(c in e)if(theosp.array.isArray(e[c]))e[c].push(a);else e[c]=[e[c],a];else e[c]=a});return e};
